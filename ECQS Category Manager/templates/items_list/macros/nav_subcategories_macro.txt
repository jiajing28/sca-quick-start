<% registerMacro('navSubcategories', function (view, subcategories) { %>
<%
	var has_subcategories = subcategories && subcategories.length > 0;
%>
<% if (has_subcategories) { %>
<div class="well faceted-navigation">
	<div class="well-header facet-list-header">
		<%= _(view.catModel.name).translate() %>
	</div>
	<div class="well-body">
		<ul>
			<% _.each(subcategories, function (subcategory) { %>
				<% var subcategoryModel = _.findWhere(ECQS.categories, {id : subcategory.iddisp}); %>
				<li>			
					<% if (subcategoryModel.custrecord_ecqs_category_url) { %>
						<a href="/<%= subcategoryModel.custrecord_ecqs_category_url %>"><%= subcategoryModel.name %></a>
					<% } else { %>
						<%= subcategoryModel.name %>
					<% } %>
				</li>
			<% }); %>
		</ul>
	</div>
</div>
<% } %>
<% }) %>